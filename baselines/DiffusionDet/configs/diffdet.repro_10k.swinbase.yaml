_BASE_: "Base-DiffusionDet.yaml"
MODEL:
  # Swin-Base backbone (Detectron2-compatible weights).
  # Download: https://github.com/ShoufaChen/DiffusionDet/releases/download/v0.1/swin_base_patch4_window7_224_22k.pkl
  WEIGHTS: "models/swin_base_patch4_window7_224_22k.pkl"
  BACKBONE:
    NAME: "build_swintransformer_fpn_backbone"
  SWIN:
    SIZE: "B-22k"
    OUT_FEATURES: (0, 1, 2, 3)
  FPN:
    IN_FEATURES: ["swin0", "swin1", "swin2", "swin3"]
  DiffusionDet:
    NUM_PROPOSALS: 500
    NUM_CLASSES: 3
DATASETS:
  TRAIN: ("repro_10k_train",)
  TEST:  ("repro_10k_val",)
SOLVER:
  IMS_PER_BATCH: 4
  BASE_LR: 0.000025
  # Full baseline schedule for 10k iterations.
  # When doing smoke tests, override MAX_ITER on the command line.
  STEPS: (8000, 9500)
  MAX_ITER: 10000
  CHECKPOINT_PERIOD: 2500
  WARMUP_ITERS: 50
INPUT:
  CROP:
    ENABLED: True
  FORMAT: "RGB"
OUTPUT_DIR: "output/repro_10k_diffdet_swinb"
